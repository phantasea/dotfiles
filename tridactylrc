" Based on the example tridactylrc provided in the repo.

colorscheme dark

sanitise commandline tridactyllocal tridactylsync

guiset_quiet navbar always
guiset_quiet tabs always nocount

set allowautofocus false
set editorcmd st -e vim
set findcase smart
set newtab about:blank
set yankto both

set hintnames short
set hintchars hjklasdfgyuiopqwernmtvcbxz

set followpagepatterns.next ^(next|newer)\b|»|>>|^(more|更多結果|下一頁|older)$
set followpagepatterns.prev ^(prev(ious)?|older)\b|«|<<|^上一頁$

set searchengine g
set searchurls.ddg    https://duckduckgo.com/html?q=%s
set searchurls.deb    https://packages.debian.org/search?keywords=%s&searchon=names&suite=all&section=all
set searchurls.g      https://www.google.com/search?q=%s
set searchurls.gh     https://github.com/search?utf8=%E2%9C%93&q=%s&ref=simplesearch
set searchurls.gi     https://www.google.com/search?q=%s&tbm=isch
set searchurls.gmaps  https://www.google.com/maps/search/%s
set searchurls.w      https://en.wikipedia.org/w/index.php?search=%s&title=Special%3ASearch
set searchurls.wfr    https://fr.wikipedia.org/w/index.php?search=%s&title=Sp%E9cial%3ARecherche
set searchurls.y      https://www.youtube.com/results?search_query=%s

" Ctrl-F should use the browser's native 'find' functionality.
unbind <C-f>

" Let Ctrl-c to copy in the commandline
unbind --mode=ex <C-c>

unbind yy
unbind ys
unbind yc
unbind ym
unbind yt

bind  g<Space>  source ~/.tridactylrc
bind  gp  followpage prev
bind  gn  followpage next
bind  gd  tabdetach

bind  <C-o>  back
bind  <C-i>  forward
bind  <C-s>  saveas
bind  <C-a>  urlincrement 1
bind  <C-x>  urlincrement -1
bind  <C-n>  tabnext
bind  <C-p>  tabprev

bind  <  tabnext
bind  >  tabprev

bind  /  fillcmdline find
bind  D  tabduplicate
bind  H  back
bind  j  scrollline 5
bind  k  scrollline -5
bind  L  forward
bind  n  findnext
bind  N  findnext -?
bind  o  fillcmdline open
bind  O  current_url open
bind  t  fillcmdline tabopen
bind  T  current_url tabopen
bind  p  clipboard open
bind  P  clipboard tabopen
bind  q  tabclose
bind  u  undo tab
bind  U  undo window
bind  v  composite hint -pipe a href | exclaim_quiet mpv --ontop --keepaspect-window --profile=protocol.http
bind  V  js tri.native.run(`mpv --ontop --keepaspect-window --profile=protocol.http '${document.location.href}'`)
bind  x  stop
bind  y  clipboard yankshort

bind --mode=ex <Space> ex.insert_space_or_completion

bind --mode=ex          <C-a>   text.beginning_of_line
bind --mode=insert      <C-a>   text.beginning_of_line
bind --mode=input       <C-a>   text.beginning_of_line
bind --mode=ex          <C-e>   text.end_of_line
bind --mode=insert      <C-e>   text.end_of_line
bind --mode=input       <C-e>   text.end_of_line
bind --mode=ex          <C-f>   text.forward_word
bind --mode=insert      <C-f>   text.forward_word
bind --mode=input       <C-f>   text.forward_word
bind --mode=ex          <C-k>   text.kill_line
bind --mode=insert      <C-k>   text.kill_line
bind --mode=input       <C-k>   text.kill_line
bind --mode=ex          <C-u>   text.backward_kill_line
bind --mode=insert      <C-u>   text.backward_kill_line
bind --mode=input       <C-u>   text.backward_kill_line

" Requires custom firefox build: https://github.com/glacambre/firefox-patches
bind --mode=ex          <C-w>   text.backward_kill_word
bind --mode=insert      <C-w>   text.backward_kill_word
bind --mode=input       <C-w>   text.backward_kill_word

bind --mode=ex          <C-n>   ex.next_completion
bind --mode=ex          <C-p>   ex.prev_completion
bind --mode=ex          <C-y>   ex.insert_completion
bind --mode=ex          <C-e>   ex.deselect_completion
bind --mode=ex          <Tab>   ex.complete
bind --mode=ex          <C-w>   composite text.beginning_of_line ; text.forward_word ; text.kill_word

" Make gu take you back to subreddit from comments
bindurl reddit\.com gu urlparent 4
bindurl news\.ycombinator\.com/item gu urlparent 2

" ;f and ;F are used to hint only the urls I'm most likely to click (like search results)
bindurl next\.duckduckgo\.com ;f hint -Jc  a.result__a
bindurl next\.duckduckgo\.com ;F hint -Jbc a.result__a
bindurl www\.google\.com ;f hint -Jc .rc > .r > a
bindurl www\.google\.com ;F hint -Jbc .rc > .r > a
bindurl github\.com/search ;f hint -Jc  .repo-list-item * > a.v-align-middle
bindurl github\.com/search ;F hint -Jbc .repo-list-item * > a.v-align-middle
bindurl github\.com/.*/.*/issues ;f hint -Jc a.h4
bindurl github\.com/.*/.*/issues ;F hint -Jbc a.h4
bindurl github\.com/.*/.*/commits ;f hint -Jc a.message
bindurl github\.com/.*/.*/commits ;F hint -Jbc a.message

# ** Hinting
bind ;s hint -a
bind ;S hint -s
bind ;c hint -c summary,[class*="expand"],[class="togg"]
# bind ;i hint -i
# bind ;I hint -I
# bind ;k hint -k
# bind ;y hint -y
# bind ;p hint -p
# bind ;P hint -P
# bind ;r hint -r
# bind ;s hint -s
# bind ;S hint -S
# bind ;a hint -a
# bind ;A hint -A
# bind ;; hint -;
# bind ;# hint -#
# bind ;v hint -W exclaim_quiet mpv
# bind ;w hint -w

" Make quickmarks for the sane Tridactyl issue view
quickmark a https://www.amazon.co.jp/
quickmark c https://console.aws.amazon.com/
quickmark d http://www.dmm.com/
quickmark f https://feedly.com/i/latest
quickmark g https://douga.geo-online.co.jp/
quickmark h https://www.hmv.co.jp/
quickmark i https://www.instagram.com/
quickmark l https://www.deepl.com/ja/translator
quickmark n https://www.netflix.com/jp/Login
quickmark p https://getpocket.com/a/
quickmark r https://www.rakuten.co.jp/
quickmark s https://app.simplenote.com/
quickmark t https://github.com/tridactyl/tridactyl/issues?utf8=%E2%9C%93&q=sort%3Aupdated-desc+
quickmark t https://tweetdeck.twitter.com/
quickmark x https://app.plex.tv/desktop
quickmark y https://www.youtube.com/?gl=JP
quickmark z https://us02web.zoom.us/signin

# * AutoCmds
# Curently, 'TriStart', 'DocStart', 'DocEnd', 'TabEnter' and 'TabLeft' are supported.

" vim:ft=tridactyl
