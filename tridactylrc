" Based on the example tridactylrc provided in the repo.

sanitise tridactyllocal tridactylsync

colorscheme dark

fixamo_quiet
guiset_quiet navbar autohide
guiset_quiet hoverlink right
guiset_quiet tabs count

set allowautofocus false
set editorcmd xterm -e vim
set findcase insensitive
set newtab about:blank
set smoothscroll true
set yankto both

" Ctrl-F should use the browser's native 'find' functionality.
unbind <C-f>

" Let Ctrl-c to copy in the commandline
unbind --mode=ex <C-c>

unbind yy
unbind ys
unbind yc
unbind ym
unbind yt

bind < tabprev
bind > tabnext

bind g<Space> source
bind gp followpage prev
bind gn followpage next
bind gd tabdetach

bind / fillcmdline find
bind D tabduplicate
bind n findnext 1
bind N findnext -1
bind j scrollline 5
bind k scrollline -5
bind H back
bind L forward
bind o fillcmdline open
bind O current_url open
bind t fillcmdline tabopen
bind T current_url tabopen
bind p clipboard open
bind P clipboard tabopen
bind s fillcmdline saveas
bind S saveas
bind u undo tab
bind U undo window
bind v composite hint -pipe a href | exclaim_quiet mpv --ontop --keepaspect-window --profile=protocol.http
bind V js tri.native.run(`mpv --ontop --keepaspect-window --profile=protocol.http '${document.location.href}'`)
bind q tabclose
bind x tabclose
bind y clipboard yankshort

bind --mode=ex          <C-a>   text.beginning_of_line
bind --mode=insert      <C-a>   text.beginning_of_line
bind --mode=input       <C-a>   text.beginning_of_line
bind --mode=ex          <C-e>   text.end_of_line
bind --mode=insert      <C-e>   text.end_of_line
bind --mode=input       <C-e>   text.end_of_line
bind --mode=ex          <C-f>   text.forward_word
bind --mode=insert      <C-f>   text.forward_word
bind --mode=input       <C-f>   text.forward_word
bind --mode=ex          <C-k>   text.kill_line
bind --mode=insert      <C-k>   text.kill_line
bind --mode=input       <C-k>   text.kill_line
bind --mode=ex          <C-u>   text.backward_kill_line
bind --mode=insert      <C-u>   text.backward_kill_line
bind --mode=input       <C-u>   text.backward_kill_line

" Requires custom firefox build: https://github.com/glacambre/firefox-patches
bind --mode=ex          <C-w>   text.backward_kill_word
bind --mode=insert      <C-w>   text.backward_kill_word
bind --mode=input       <C-w>   text.backward_kill_word

" bind --mode=ex          <C-n>   ex.next_completion
" bind --mode=ex          <C-p>   ex.prev_completion
" bind --mode=ex          <C-y>   ex.insert_completion
" bind --mode=ex          <C-e>   ex.deselect_completion
" bind --mode=ex          <Tab>   ex.complete
bind --mode=ex          <C-w>   composite text.beginning_of_line ; text.forward_word ; text.kill_word

set searchengine g
set searchurls.ddg https://duckduckgo.com/html?q=%s
set searchurls.deb https://packages.debian.org/search?keywords=%s&searchon=names&suite=all&section=all
set searchurls.g https://www.google.com/search?q=%s
set searchurls.gh https://github.com/search?utf8=%E2%9C%93&q=%s&ref=simplesearch
set searchurls.gi https://www.google.com/search?q=%s&tbm=isch
set searchurls.gmaps https://www.google.com/maps/search/%s
set searchurls.w https://en.wikipedia.org/w/index.php?search=%s&title=Special%3ASearch
set searchurls.wfr https://fr.wikipedia.org/w/index.php?search=%s&title=Sp%E9cial%3ARecherche
set searchurls.y https://www.youtube.com/results?search_query=%s

" Make gu take you back to subreddit from comments
bindurl reddit\.com gu urlparent 4
bindurl news\.ycombinator\.com/item gu urlparent 2

" ;f and ;F are used to hint only the urls I'm most likely to click (like search results)
bindurl next\.duckduckgo\.com ;f hint -Jc  a.result__a
bindurl next\.duckduckgo\.com ;F hint -Jbc a.result__a
bindurl www\.google\.com ;f hint -Jc .rc > .r > a
bindurl www\.google\.com ;F hint -Jbc .rc > .r > a
bindurl github\.com/search ;f hint -Jc  .repo-list-item * > a.v-align-middle
bindurl github\.com/search ;F hint -Jbc .repo-list-item * > a.v-align-middle
bindurl github\.com/.*/.*/issues ;f hint -Jc a.h4
bindurl github\.com/.*/.*/issues ;F hint -Jbc a.h4
bindurl github\.com/.*/.*/commits ;f hint -Jc a.message
bindurl github\.com/.*/.*/commits ;F hint -Jbc a.message

# ** Hinting
bind ;s hint -a
bind ;S hint -s
bind ;c hint -c summary,[class*="expand"],[class="togg"]
# bind ;i hint -i
# bind ;I hint -I
# bind ;k hint -k
# bind ;y hint -y
# bind ;p hint -p
# bind ;P hint -P
# bind ;r hint -r
# bind ;s hint -s
# bind ;S hint -S
# bind ;a hint -a
# bind ;A hint -A
# bind ;; hint -;
# bind ;# hint -#
# bind ;v hint -W exclaim_quiet mpv
# bind ;w hint -w

# * AutoCmds
# Curently, 'TriStart', 'DocStart', 'DocEnd', 'TabEnter' and 'TabLeft' are supported.

" vim:ft=tridactyl
