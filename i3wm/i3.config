# This file has been auto-generated by i3-config-wizard(1).
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

set $alt Mod1

### i3bar setting {{{
bar {
	#font pango:mono 10  #16.04 lightdm
	#font pango:mono 28  #20.04 gdm3
	#font pango:mono 15  #20.04 lightdm
	font pango:mono 15
    #status_command i3status --config ~/.config/i3status/config
    status_command i3blocks
    tray_output primary
    position top
    #mode hide
    #hidden_state hide
    #modifier $alt
    separator_symbol "|"
    colors {
        # Whole color settings
        #statusline #ffffff
        background  #071E31
        separator   #666666

        # Type border background font
        focused_workspace  #3685E2 #3685E2 #fafafa
        active_workspace   #5294E2 #5294E2 #fafafa
        inactive_workspace #404552 #404552 #fafafa
        urgent_workspace   #FF5757 #FF5757 #fafafa
    }
}
### }}}

### basic setting {{{
# Font for window titles
#font pango:monospace 8   #16.04 lightdm
#font pango:monospace 24  #20.04 gdm3
#font pango:monospace 10  #20.04 lightdm
font pango:monospace 10

#font pango:DejaVu Sans Mono 8   #16.04 lightdm
#font pango:DejaVu Sans Mono 24  #20.04 gdm3
#font pango:DejaVu Sans Mono 10  #20.04 lightdm
font pango:DejaVu Sans Mono 10

# Hide the title-bar of all windows
#for_window [class="^.*"] border pixel 1
new_window        none
new_float         normal
gaps inner        2
gaps outer        0
smart_gaps        on
smart_borders     on
hide_edge_borders smart

#floating_minimum_size 1800 x 1200
#floating_maximum_size 0 x 0

# Use Mouse+$alt to drag floating windows to their wanted position
floating_modifier $alt
### }}}

### autostart {{{
# Set desktop background picture
exec --no-startup-id setwallpaper ~/.wallpaper/2.longmao.jpg

exec --no-startup-id compton -b
exec --no-startup-id sleep 2 && exec transset -n i3bar 0.81

exec st -c myst
exec env GDK_DPI_SCALE=0.8 firefox

#exec --no-startup-id export GTK_IM_MODULE=ibus
#exec --no-startup-id export XMODIFIERS=@im=ibus
#exec --no-startup-id export QT_IM_MODULE=ibus
#exec --no-startup-id ibus-daemon --xim -d -r
#exec --no-startup-id volumeicon &
#exec --no-startup-id xautolock -time 1 -locker "i3lock -u -t -e -c 000000 -i ~/.wallpaper/1.qianyuqianxun.jpg -n" &amp;
#exec --no-startup-id nm-applet
#exec --no-startup-id udiskie --tray

# swap caps lock and escape
exec_always --no-startup-id xmodmap -e "clear lock"
exec_always --no-startup-id xmodmap -e "keycode 9 = Caps_Lock NoSymbol Caps_Lock"
exec_always --no-startup-id xmodmap -e "keycode 66 = Escape NoSymbol Escape"

# Reset the volume as 64% when startup
exec_always --no-startup-id pactl set-sink-volume 0 64%

# xidlehook #corners(xxxx): top_left, top_right, bottom_left, bottom_right
exec_always --no-startup-id xautolock -corners 0-0- -time 15 -locker "i3lock -n -f -e -c 272d2d && sleep 1"
### }}}

### window/workspace setting {{{
for_window [title="tmux"]           workspace --no-auto-back-and-forth  "term"
for_window [class="^qutebrowser$"]  workspace --no-auto-back-and-forth  "misc"
for_window [class="^firefox$"]      workspace --no-auto-back-and-forth  "misc"
for_window [class="^Google"]        workspace --no-auto-back-and-forth  "misc"
for_window [instance="vimb"]        workspace --no-auto-back-and-forth  "misc"
for_window [class="mpv|MPlayer"]    workspace --no-auto-back-and-forth  "misc"
for_window [class="Zathura|tabbed"] workspace --no-auto-back-and-forth  "misc"
for_window [class="feh"]            workspace --no-auto-back-and-forth

for_window [class="feh|tabbed|Zathura"]          fullscreen enable

for_window [class="^St$|newst|^Terminal$"]       floating enable
for_window [class="Nautilus|Totem|^screenkey"]   floating enable

for_window [class="asmr|nova"]  floating enable, move scratchpad
for_window [class="mpv"]        floating enable, move scratchpad, scratchpad show

client.focused.floating.border = #ff0000

for_window [floating]      resize set 1600 1000, move absolute position center
for_window [class="asmr"]  resize set 1500 1000, move absolute position center
for_window [class="nova"]  resize set 1800 1000, move absolute position center, border pixel 1
for_window [class="mpv"]   resize set 1200, move position 0 0

# assign apps to a named workspace
assign [class="^myst$"]             "term"
assign [instance="^vimb$"]          "misc"
assign [class="^firefox$|^Google"]  "misc"
assign [class="^mpv|^MPlayer"]      "misc"
assign [class="Zathura|tabbed"]     "misc"

set $CurrWorkspace  i3-msg -t get_workspaces | jq '.[] | select(.focused==true).name'
set $CurrScratchpad i3-msg -t get_tree | jq ".nodes|.[]|.|.nodes|.[]|.nodes|.[]|select(.name==\"__i3_scratch\")|.floating_nodes|.[]|.nodes|.[]|select(.focused==true).window_properties.class"
set $ScratchpadList i3-msg -t get_tree | jq ".nodes|.[]|.|.nodes|.[]|.nodes|.[]|select(.name==\"__i3_scratch\")|.floating_nodes|.[]|.nodes|.[]|.window_properties.class"
set $ScratchHasNova i3-msg -t get_tree | jq '.nodes[].nodes[].nodes[] | .type == "workspace" and .name =="__i3_scratch" and .floating_nodes[].nodes[].window_properties.class == "nova"' | grep -q true
### }}}

### keybind key part-1 {{{
#set $create_asmr if ! pgrep -a st | grep mocp | grep asmr; then st -c asmr -e mocp /opt/.porn/asmr; else i3-msg [class=asmr] scratchpad show; fi
#set $create_nova if ! tmux -L x-serv has-session -t nova; then env I3_SCRATCHPAD=YES st -c nova; else i3-msg [class=nova] scratchpad show; fi
set $load_moc_m3u if [ -f /opt/.porn/asmr/asmr.m3u ]; then mocp -a /opt/.porn/asmr/asmr.m3u; fi
set $create_asmr  st -c asmr -e mocp /opt/.porn/asmr
set $create_nova  env I3_SCRATCHPAD=YES st -c nova

bindsym $alt+grave exec "if ! i3-msg [class=asmr] scratchpad show; then i3-msg exec '$create_asmr'; sleep 0.2; i3-msg [class=asmr] scratchpad show; fi"
bindsym $alt+space exec "if ! i3-msg [class=nova] scratchpad show; then i3-msg exec '$create_nova'; sleep 0.2; i3-msg [class=nova] scratchpad show; fi"
bindsym $alt+u     [class="^(?!asmr|nova).*$"] scratchpad show
bindsym $alt+y     scratchpad show

bindsym $alt+c     resize set 1800 1200, move absolute position center
bindsym $alt+g     [class="mpv"] move position 0 0, resize set 1200

#bindsym $alt+Tab       workspace back_and_forth
bindsym $alt+Tab        workspace next
bindsym $alt+Delete     move scratchpad
bindsym $alt+Escape     move scratchpad
bindsym $alt+Return     fullscreen toggle
bindsym $alt+BackSpace  floating toggle

# Lock screen
bindsym $alt+Ctrl+l exec --no-startup-id i3lock -n -f -t -c 000000 -i ~/.wallpaper/screenlock.png

# printscreen
bindsym Print       exec --no-startup-id scrot $HOME/misc/scrot_`date +%Y%m%d_%H%M%S`.jpg
bindsym $alt+Print  exec --no-startup-id scrot $HOME/misc/scrot_`date +%Y%m%d_%H%M%S`.jpg
bindsym --release $alt+Insert exec --no-startup-id import $HOME/temp/snapshot_`date +%Y%m%d_%H%M%S`.jpg

#workspace kill
#bindsym $alt+q exec "if [[ $(i3-msg -t get_workspaces | jq -r '.[] | select(.focused==true).name') != (term|asmr|nova) ]]; then i3-msg kill; fi"
bindsym $alt+q [con_id="__focused__" class="^(?!asmr|nova|myst).*$"] kill

# PulseAudio Volume Control
bindsym $alt+Ctrl+m  exec pavucontrol

# start dmenu (a program launcher)
#bindsym $alt+o exec i3-dmenu-desktop
#bindsym $alt+o exec xterm -e 'i3-dmenu-desktop --dmenu=fzf'
bindsym $alt+o       exec rofi -show combi - combi-modi "window,run" -modi combi
bindsym $alt+Shift+o exec dmenu_run

bindsym $alt+slash   exec tmux -L x-serv list-buffers | cut -d: -f3 | sort -u | rofi -dmenu | xclip -i -sel clip
#bindsym $alt+slash      exec rofi -modi "clipboard:greenclip print" -show clipboard -run-command '{cmd}'
#bindsym $alt+backslash  exec greenclip clear

bindsym $alt+b   exec --no-startup-id clipcut
#bindsym $alt+b  exec --no-startup-id xmouseless
#bindsym --release $alt+b  exec --no-startup-id xdotool key ctrl+c
#bindsym --release ctrl+c  exec --no-startup-id xdotool click 3 && exec xdotool key c
#bindsym --release ctrl+c  workspace "misc"; exec --no-startup-id xdotool key alt e c
### }}}

### keybind key part-2 {{{
# reload the configuration file
bindsym $alt+r reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $alt+Shift+r restart
# exit i3 (logs out of your X session)
bindsym $alt+Shift+q exec "i3-nagbar -t warning -m 'Really want to exit i3?' -b 'Yes, exit i3' 'i3-msg exit'"

bindsym $alt+z        exec tmux -L x-serv kill-server
bindsym $alt+Shift+z  exec nautilus --no-desktop 2>/dev/null &
bindsym $alt+f        exec st -c newst fffm
bindsym $alt+Shift+f  exec "$create_nova"
bindsym $alt+m        exec $create_asmr && exec mocp -a /opt/.porn/asmr/asmr.m3u
bindsym $alt+Shift+m  exec "$create_asmr"; exec "$load_moc_m3u"
bindsym $alt+t        exec st -c newst
bindsym $alt+Shift+t  exec st -c myst -e tmux -L x-serv attach-session
bindsym $alt+x        exec env INPUTRC=/opt/conf/inputrc-fzf xterm
bindsym $alt+Shift+x  exec env INPUTRC=/opt/conf/inputrc-fzf gnome-terminal --class xxxx
bindsym $alt+w        exec st -e elinks
bindsym $alt+Shift+w  exec env GDK_DPI_SCALE=0.8 firefox
#bindsym $alt+Shift+w  exec qutebrowser
#bindsym $alt+Shift+w  exec tabbed -n vimb -c vimb -e
#bindsym $alt+Shift+w  exec google-chrome

# mocp control
bindsym $alt+semicolon    exec --no-startup-id  mocp --next
bindsym $alt+comma        exec --no-startup-id  mocp --previous
bindsym $alt+period       exec --no-startup-id  mocp --toggle-pause
bindsym $alt+bracketright exec --no-startup-id  mocp --seek +10
bindsym $alt+bracketleft  exec --no-startup-id  mocp --seek -10
bindsym $alt+Right        exec --no-startup-id  mocp --seek +20
bindsym $alt+Left         exec --no-startup-id  mocp --seek -20
bindsym $alt+1            exec --no-startup-id  mocp --jump 10%
bindsym $alt+2            exec --no-startup-id  mocp --jump 20%
bindsym $alt+3            exec --no-startup-id  mocp --jump 30%
bindsym $alt+4            exec --no-startup-id  mocp --jump 40%
bindsym $alt+5            exec --no-startup-id  mocp --jump 50%
bindsym $alt+6            exec --no-startup-id  mocp --jump 60%
bindsym $alt+7            exec --no-startup-id  mocp --jump 70%
bindsym $alt+8            exec --no-startup-id  mocp --jump 80%
bindsym $alt+9            exec --no-startup-id  mocp --jump 90%
bindsym $alt+0            exec --no-startup-id  mocp --jump 00%
bindsym $alt+shift+comma  exec --no-startup-id  mocp --volume -7
bindsym $alt+shift+period exec --no-startup-id  mocp --volume +7
### }}}

### keybind misc part {{{
# change focus
bindsym $alt+n focus next
bindsym $alt+p focus prev
bindsym $alt+h focus left
bindsym $alt+j focus down
bindsym $alt+k focus up
bindsym $alt+l focus right

# move focused window
bindsym $alt+Shift+h move left
bindsym $alt+Shift+j move down
bindsym $alt+Shift+k move up
bindsym $alt+Shift+l move right

# hide/unhide i3status bar
bindsym $alt+Shift+b bar mode toggle

# split in horizontal/vertical orientation
bindsym $alt+Shift+s layout toggle split
bindsym $alt+s split h
bindsym $alt+v split v

# change container layout (stacked, tabbed, toggle split)
#bindsym $alt+Control+s      layout stacking
#bindsym $alt+Control+t      layout tabbed
#bindsym $alt+Control+space  layout toggle split

# change focus between tiling / floating windows
bindsym $alt+Control+space focus mode_toggle

# focus the parent/child container
#bindsym $alt+a focus parent
#bindsym $alt+d focus child
### }}}

### workspace keybind {{{
bindsym $alt+Control+1  workspace "term"
bindsym $alt+Control+2  workspace "misc"
bindsym $alt+Control+3  workspace 3
bindsym $alt+Control+4  workspace 4
bindsym $alt+Control+5  workspace 5
bindsym $alt+Control+6  workspace 6
bindsym $alt+Control+7  workspace 7
bindsym $alt+Control+8  workspace 8
bindsym $alt+Control+9  workspace 9
bindsym $alt+Control+0  workspace 10

# move focused container to workspace
bindsym $alt+Shift+1 move container to workspace "term"; workspace "term"
bindsym $alt+Shift+2 move container to workspace "misc"; workspace "misc"
bindsym $alt+Shift+3 move container to workspace 3; workspace 3
bindsym $alt+Shift+4 move container to workspace 4; workspace 4
bindsym $alt+Shift+5 move container to workspace 5; workspace 5
bindsym $alt+Shift+6 move container to workspace 6; workspace 6
bindsym $alt+Shift+7 move container to workspace 7; workspace 7
bindsym $alt+Shift+8 move container to workspace 8; workspace 8
bindsym $alt+Shift+9 move container to workspace 9; workspace 9
bindsym $alt+Shift+0 move container to workspace 10; workspace 10

# move workspace to outputs
#bindsym $alt+Ctrl+Left  move workspace to output left
#bindsym $alt+Ctrl+Down  move workspace to output down
#bindsym $alt+Ctrl+Up    move workspace to output up
#bindsym $alt+Ctrl+Right move workspace to output right
### }}}

### Function keybind {{{
# for sound control
#bindsym XF86AudioRaiseVolume exec amixer set Master playback 3+
#bindsym XF86AudioLowerVolume exec amixer set Master playback 3-
#bindsym XF86AudioMute exec amixer set Master playback 0%
#bindsym XF86AudioMute exec amixer set Master toggle

# Pulse Audio controls
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 0 +5%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 0 -5%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 0 toggle

# Sreen brightness controls
bindsym XF86MonBrightnessUp   exec --no-startup-id xbacklight +1
bindsym XF86MonBrightnessDown exec --no-startup-id xbacklight -1
bindsym $alt+F2               exec --no-startup-id xbacklight +1
bindsym $alt+F1               exec --no-startup-id xbacklight -1

# Touchpad controls
bindsym XF86TouchpadToggle exec --no-startup-id toggletouchpad
bindsym $alt+F8            exec --no-startup-id toggletouchpad
#bindsym $alt+F8 exec ([[ $(synclient -l | grep TouchpadOff | cut -d '=' -f 2) -eq 0 ]] && synclient TouchpadOff=1 || synclient TouchpadOff=0)

# WIFI controls
bindsym XF86WLAN  exec --no-startup-id togglewifi
bindsym $alt+F9   exec --no-startup-id togglewifi

# BlueTooth controls
bindsym $alt+F10  exec --no-startup-id togglebluetooth

# Media player controls
bindsym XF86AudioPlay  exec --no-startup-id playerctl play
bindsym XF86AudioPause exec --no-startup-id playerctl pause
bindsym XF86AudioNext  exec --no-startup-id playerctl next
bindsym XF86AudioPrev  exec --no-startup-id playerctl previous
### }}}

### mode setting {{{
# move floating windows with keys
bindsym $alt+Shift+v mode "move" focus floating
mode "move" {
    # move focus among floating windows
    bindsym $alt+Tab focus right

    bindsym c move absolute position center

    bindsym h     move left
    bindsym j     move down
    bindsym k     move up
    bindsym l     move right

    bindsym Left  move left  30 px
    bindsym Down  move down  30 px
    bindsym Up    move up    30 px
    bindsym Right move right 30 px

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym q      mode "default"
}

# resize window (you can also use the mouse for that)
bindsym $alt+Shift+c mode "resize"
mode "resize" {
    bindsym j resize shrink width 10 px or 10 ppt
    bindsym k resize grow height 10 px or 10 ppt
    bindsym l resize shrink height 10 px or 10 ppt
    bindsym semicolon resize grow width 10 px or 10 ppt

    # same bindings, but for the arrow keys
    bindsym Left resize shrink width 10 px or 10 ppt
    bindsym Down resize grow height 10 px or 10 ppt
    bindsym Up resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym q      mode "default"
}

# i3lock shutdown, reboot, lock screen
set $Locker i3lock -t -e -f -n -c 000000 -i ~/.wallpaper/1.qianyuqianxun.jpg
set $sys_ctrl  System -- lock(l), logout(x)
bindsym $alt+Control+Delete mode "$sys_ctrl"
mode "$sys_ctrl" {
    bindsym l exec --no-startup-id $Locker, mode "default"
    bindsym x exec --no-startup-id i3-msg exit, mode "default"
   #bindsym s exec --no-startup-id $Locker &amp;&amp; systemctl suspend, mode "default"
   #bindsym h exec --no-startup-id $Locker &amp;&amp; systemctl hibernate, mode "default"
   #bindsym r exec --no-startup-id systemctl reboot, mode "default"
   #bindsym Shift+s exec --no-startup-id systemctl poweroff -i, mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym q      mode "default"
}

# Gap mode. Choose o or i for modifying outer/inner gaps.
# Press one of + / - (in-/decrement for current workspace) or 0 (remove gaps for current workspace). 
# If you also press Shift with these keys, the change will be global for all workspaces.
set $mode_gaps       Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
bindsym $alt+Shift+g mode "$mode_gaps"
mode "$mode_gaps" {
    bindsym o      mode "$mode_gaps_outer"
    bindsym i      mode "$mode_gaps_inner"

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym q      mode "default"
}
mode "$mode_gaps_inner" {
    bindsym plus  gaps inner current plus 5
    bindsym minus gaps inner current minus 5
    bindsym 0     gaps inner current set 0

    bindsym Shift+plus  gaps inner all plus 5
    bindsym Shift+minus gaps inner all minus 5
    bindsym Shift+0     gaps inner all set 0

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym q      mode "default"
}
mode "$mode_gaps_outer" {
    bindsym plus  gaps outer current plus 5
    bindsym minus gaps outer current minus 5
    bindsym 0     gaps outer current set 0

    bindsym Shift+plus  gaps outer all plus 5
    bindsym Shift+minus gaps outer all minus 5
    bindsym Shift+0     gaps outer all set 0

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym q      mode "default"
}

set $pass_thru  Passthru Mode - Press Alt+Ctrl+p to exit
bindsym $alt+Ctrl+p mode "$pass_thru"
mode "$pass_thru" {
    bindsym $alt+Ctrl+p mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym q      mode "default"
}
### }}}

# vim: set foldmethod=marker:
